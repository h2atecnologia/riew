!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Riew=e()}}(function(){return function e(t,r,n){function u(i,f){if(!r[i]){if(!t[i]){var a="function"==typeof require&&require;if(!f&&a)return a(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var s=r[i]={exports:{}};t[i][0].call(s.exports,function(e){return u(t[i][1][e]||e)},s,s.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)u(n[i]);return u}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.STATE_VALUE_CHANGE="STATE_VALUE_CHANGE",r.CANCEL_EFFECT="CANCEL_EFFECT"},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./utils");var u=function(){var e={},t=[],r={};function u(e,t){return(e?e.id:(0,n.getId)("target"))+"_"+(t?t.id:(0,n.getId)("source"))}function o(e,t){return e?(r[e.id]||(r[e.id]={}),r[e.id][t]||(r[e.id][t]=[]),r[e.id][t]):Object.keys(r).reduce(function(e,n){return e=e.concat(r[n][t]||[])},[])}return e.add=function(e){if(!e||!e.id)throw new Error('Each node in the grid must be an object with "id" field. Instead "'+e+'" given.');t.push(e)},e.remove=function(e){var r=t.findIndex(function(t){return t.id===e.id});r>=0&&t.splice(r,1)},e.reset=function(){t=[],r={}},e.nodes=function(){return t},e.getNodeById=function(e){return t.find(function(t){return t.id===e})},e.subscribe=function(e){var t={},r=void 0;return t.to=function(e){return r=e,t},t.when=function(i,f){var a=r||{id:(0,n.getId)("sub_actor")},c=o(a,i),s=u(e,a),d=c.find(function(e){return e.name===s});return d||c.push(d=function(e,t){return{name:e||(0,n.getId)("sub"),callback:t}}(s,f)),t},t},e.emit=function(e){var t={},r=void 0;return t.from=function(e){return r=e,t},t.with=function(){for(var t=arguments.length,n=Array(t),u=0;u<t;u++)n[u]=arguments[u];o(r,e).forEach(function(e){return e.callback.apply(e,n)})},t},e.unsubscribe=function(e){return{from:function(t){var n=u(e,t);r[t.id]&&Object.keys(r[t.id]).forEach(function(u){if(e){var o=r[t.id][u].findIndex(function(e){return e.name===n});o>=0&&r[t.id][u].splice(o,1)}else r[t.id][u]=[]})}}},e.off=function(e){r[e.id]={}},e}();r.default=u},{"./utils":15}],3:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,u=!1,o=void 0;try{for(var i,f=e[Symbol.iterator]();!(n=(i=f.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){u=!0,o=e}finally{try{!n&&f.return&&f.return()}finally{if(u)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=e("./state"),f=l(e("./riew")),a=l(e("./react")),c=l(e("./grid")),s=e("./constants"),d=e("./index");function l(e){return e&&e.__esModule?e:{default:e}}var y,p,v=function(e){e.defineProduct("state",function(t){var r=(0,i.State)(t);return c.default.add(r),e.produce("effect",r)}),e.defineProduct("effect",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.createEffect(t);return c.default.add(r),r}),e.defineProduct("mergeStates",function(t){var r=function(){return Object.keys(t).reduce(function(e,r){var n=o(t[r],1)[0];return e[r]=n(),e},{})},n=e.produce("state"),i=c.default.getNodeById(n.stateId);return i.get=r,i.set=function(e){if("object"!==(void 0===e?"undefined":u(e)))throw new Error("Wrong merged state value. Must be key-value pairs.");Object.keys(e).forEach(function(r){if(!t[r])throw new Error('There is no state with key "'+r+'".');(0,o(t[r],2)[1])(e[r])},{})},Object.keys(t).forEach(function(e){(0,d.subscribe)(t[e].pipe(function(){c.default.emit(s.STATE_VALUE_CHANGE).from(i).with(r())}))}),n}),e.defineProduct("riew",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var u=f.default.apply(void 0,[e].concat(r));return c.default.add(u),u}),e.defineProduct("reactRiew",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return a.default.apply(void 0,[e].concat(r))})},m=(p={},(y={}).defineProduct=function(e,t){if(p[e])throw new Error('A product with type "'+e+'" already exists.');p[e]=t},y.undefineProduct=function(e){if(!p[e])throw new Error('There is no product with type "'+e+'" to be removed.');delete p[e]},y.produce=function(e){for(var t,r=arguments.length,n=Array(r>1?r-1:0),u=1;u<r;u++)n[u-1]=arguments[u];if(!p[e])throw new Error('There is no product with type "'+e+'".');return(t=p)[e].apply(t,n)},y.reset=function(){p={},v(y)},y.debug=function(){return{productNames:Object.keys(p)}},y);v(m),r.default=m},{"./constants":1,"./grid":2,"./index":4,"./react":12,"./riew":13,"./state":14}],4:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0}),r.grid=r.harvester=r.parallel=r.serial=r.compose=r._fork=r.test=r.destroy=r.unsubscribe=r.subscribe=r.cancel=r.reset=r.register=r.use=r.react=r.riew=r.merge=r.state=void 0;var u="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},o=e("./utils");Object.defineProperty(r,"compose",{enumerable:!0,get:function(){return o.compose}}),Object.defineProperty(r,"serial",{enumerable:!0,get:function(){return o.serial}}),Object.defineProperty(r,"parallel",{enumerable:!0,get:function(){return o.parallel}});var i=s(e("./harvester")),f=s(e("./grid")),a=e("./constants"),c=e("./state");function s(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}r.state=function(e){return i.default.produce("state",e)},r.merge=function(e){return i.default.produce("mergeStates",e)},r.riew=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.default.produce.apply(i.default,["riew"].concat(t))},r.react={riew:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.default.produce.apply(i.default,["reactRiew"].concat(t))}},r.use=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return i.default.produce.apply(i.default,[e].concat(r))},r.register=function(e,t){return"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t||(t.__registered=e),i.default.defineProduct(e,function(){return t}),t},r.reset=function(){return f.default.reset(),i.default.reset()},r.cancel=function(e){return y.emit(a.CANCEL_EFFECT).from(e).with()},r.subscribe=function(e,t){if(e.isMutating())throw new Error("You should not subscribe an effect that mutates the state. This will lead to endless recursion.");if(!(0,c.isEffect)(e))throw new Error("You must pass an effect to the subscribe function.");t&&e();var r=y.getNodeById(e.stateId);return y.subscribe(e).to(r).when(a.STATE_VALUE_CHANGE,function(){return e()})},r.unsubscribe=function(e){var t=y.getNodeById(e.stateId);y.unsubscribe(e).from(t)},r.destroy=function(e){y.nodes().filter(function(t){return t.id===e.stateId||t.stateId===e.stateId}).forEach(function(e){e.destroy(),y.remove(e),"__registered"in e&&i.default.undefineProduct(e.__registered)})},r.test=function(e,t){var r=y.getNodeById(e.stateId),n=l(r,e),u={setValue:function(e){n.items=[{type:"map",func:[function(){return e}]}].concat(d(n.items))},swap:function(e,t,r){Array.isArray(t)||(t=[t]),n.items[e].func=t,r&&(n.items[e].type=r)},swapFirst:function(e,t){u.swap(0,e,t)},swapLast:function(e,t){u.swap(n.items.length-1,e,t)}};return t(u),n};var l=r._fork=function(e,t,r){var n=[].concat(d(t.items));return r&&n.push(r),i.default.produce("effect",e,n)},y=(r.harvester=i.default,r.grid=f.default)},{"./constants":1,"./grid":2,"./harvester":3,"./state":14,"./utils":15}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.implementLoggableInterface=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.loggable=t,e.loggability=function(t){return e.loggable=t,e}},r.implementIterableProtocol=function(e){"undefined"!=typeof Symbol&&void 0!==Symbol.iterator&&(e[Symbol.iterator]=function(){var t=[e.map(),e.mutate()],r=0;return{next:function(){return{value:t[r++],done:r>t.length}}}})}},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.QueueAPI=void 0,r.createQueue=function(e,t){var r={id:(0,n.getId)("q"),index:null,setStateValue:t,result:e,items:[],add:function(e,t){this.items.push({type:e,func:t})},process:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function u(){return r.index<r.items.length?o():(r.index=null,r.result)}function o(){var e=r.items[r.index],n=e.type,o=e.func,i=s[n];if(i)return i(r,o,t,function(e){return r.result=e,r.index++,u()});throw new Error('Unsupported method "'+n+'".')}return r.index=0,r.items.length>0?o():r.result},cancel:function(){r.items=[]}};return r};var n=e("./utils"),u=c(e("./queueMethods/pipe")),o=c(e("./queueMethods/map")),i=c(e("./queueMethods/mapToKey")),f=c(e("./queueMethods/mutate")),a=c(e("./queueMethods/filter"));function c(e){return e&&e.__esModule?e:{default:e}}var s=r.QueueAPI={define:function(e,t){this[e]=function(e,r,u,o){var i=t.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r))(e.result,u,e);return(0,n.isPromise)(i)?i.then(o):o(i)}}};s.define("pipe",u.default),s.define("map",o.default),s.define("mapToKey",i.default),s.define("mutate",f.default),s.define("filter",a.default)},{"./queueMethods/filter":7,"./queueMethods/map":8,"./queueMethods/mapToKey":9,"./queueMethods/mutate":10,"./queueMethods/pipe":11,"./utils":15}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,u){var o=e.apply(void 0,[t].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r)));return(0,n.isPromise)(o)?o.then(function(e){return e||(u.index=u.items.length),t}):(o||(u.index=u.items.length),t)}};var n=e("../utils")},{"../utils":15}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r){return(e||function(e){return e}).apply(void 0,[t].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r)))}}},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r){return function(t){return function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}({},e,t)}.apply(void 0,[t].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r)))}}},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,u){var o=(e||function(e,t){return t}).apply(void 0,[t].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r)));return(0,n.isPromise)(o)?o.then(function(e){return u.setStateValue(e),e}):(u.setStateValue(o),o)}};var n=e("../utils")},{"../utils":15}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r){var u=(e||function(){}).apply(void 0,[t].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r)));return(0,n.isPromise)(u)?u.then(function(){return t}):t}};var n=e("../utils")},{"../utils":15}],12:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,u=!1,o=void 0;try{for(var i,f=e[Symbol.iterator]();!(n=(i=f.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){u=!0,o=e}finally{try{!n&&f.return&&f.return()}finally{if(u)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};r.default=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),u=1;u<t;u++)r[u-1]=arguments[u];return function t(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=function(t){var f=(0,o.useState)(null),s=n(f,2),d=s[0],l=s[1],y=(0,o.useState)(null),p=n(y,2),v=p[0],m=p[1],h=(0,o.useRef)(!0);return(0,o.useEffect)(function(){d&&d.update(t)},[t]),(0,o.useEffect)(function(){var n;(d=a.riew.apply(void 0,[function(t){h.current&&m(null===t?null:i.default.createElement(e,t))}].concat(r)),u&&u.length>0)&&(d=(n=d).with.apply(n,c(u)));return l(d),d.mount(t),function(){h.current=!1,d.unmount()}},[]),v};return s.displayName="Riew_"+(0,f.getFuncName)(e),s.with=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return t(r)},s}()};var u,o="undefined"!=typeof window?window.React:void 0!==t?t.React:null,i=(u=o)&&u.__esModule?u:{default:u},f=e("../utils"),a=e("../index");function c(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../index":4,"../utils":15}],13:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)};r.default=function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var i={id:(0,c.getId)("r"),name:(0,c.getFuncName)(t)};var d=!1;var m=[];var h=[];var b={};var g={};var w=(0,f.state)({},!1);var A=(0,f.state)({},!1);var _=(0,f.state)({},!1);var E=function(){return d};var S=A.mutate(function(e,t){var r=u({},e);return t&&Object.keys(t).forEach(function(e){if((0,a.isEffect)(t[e])&&!t[e].isMutating()){var n=t[e],u=l.default.getNodeById(n.stateId);r[e]=n(),b[n.stateId]||(b[n.stateId]={}),b[n.stateId][e]=n,l.default.subscribe(i).to(u).when(s.STATE_VALUE_CHANGE,function(){j(Object.keys(b[n.stateId]).reduce(function(e,t){return e[t]=b[n.stateId][t](),e},{}))})}else r[e]=t[e]}),r});var j=S.filter(E).pipe(function(e){t(e)});var P=_.mutate(v);var O=w.mutate(v);P({state:function(){var e=f.state.apply(void 0,arguments);return m.push(e),e},render:function(e){return p(e,"The `render` method"),j(e)},isActive:E,props:w});function I(){Object.keys(g).forEach(function(e){var t=void 0;"@"===e.charAt(0)?(e=e.substr(1,e.length),t=(0,f.use)(e)):t=g[e],S(y({},e,t)),P(y({},e,t))})}i.isActive=E;i.mount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(e,"The `mount` method"),O(e),S(e),I();var t=c.parallel.apply(void 0,n)(_()),r=function(e){return h=e||[]};return(0,c.isPromise)(t)?t.then(r):r(t),d=!0,j(),i};i.update=function(e){j(e),O(e)};i.unmount=function(){return d=!1,A.destroy(),_.destroy(),m.forEach(function(e){return e.destroy()}),m=[],h.filter(function(e){return"function"==typeof e}).forEach(function(e){return e()}),h=[],Object.keys(b).forEach(function(e){return l.default.unsubscribe(i).from(l.default.getNodeById(e))}),b={},i};i.with=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.__setExternals(t),i};i.test=function(r){var u=e.apply(void 0,[t].concat(n));return u.__setExternals([r]),u};i.__setExternals=function(e){g=u({},g,e.reduce(function(e,t){return e=u({},e,"string"==typeof t?y({},"@"+t,!0):t)},{}))};i.__output=A;return i};var i,f=e("./index"),a=e("./state"),c=e("./utils"),s=e("./constants"),d=e("./grid"),l=(i=d)&&i.__esModule?i:{default:i};function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null===e||void 0!==e&&"object"!==(void 0===e?"undefined":o(e)))throw new Error(t+' must be called with a key-value object. Instead "'+e+'" passed.');return e}var v=function(e,t){return u({},e,t)}},{"./constants":1,"./grid":2,"./index":4,"./state":14,"./utils":15}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isEffect=function(e){return e&&!0===e.__riewEffect},r.State=function(e){var t={},r=e,n=!0;return t.id=(0,i.getId)("s"),t.get=function(){return r},t.set=function(e){(0,o.default)(r,e)||!1===n||(r=e,s.grid.emit(a.STATE_VALUE_CHANGE).from(t).with(r))},t.destroy=function(){n=!1,s.grid.unsubscribe().from(t)},t.createEffect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=function e(){if(!1===n)return r;var u=(0,f.createQueue)(t.get(),t.set);return s.grid.subscribe().to(e).when(a.CANCEL_EFFECT,u.cancel),e.items.forEach(function(e){var t=e.type,r=e.func;return u.add(t,r)}),u.process.apply(u,arguments)};return u.__riewEffect=!0,u.id=(0,i.getId)("e"),u.stateId=t.id,u.items=e,(0,c.implementIterableProtocol)(u),u.isMutating=function(){return!!u.items.find(function(e){return"mutate"===e.type})},u.destroy=function(){(0,s.cancel)(u),s.grid.unsubscribe().from(u)},Object.keys(f.QueueAPI).forEach(function(e){u[e]=function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return(0,s._fork)(t,u,{type:e,func:n})}}),u},t};var n,u=e("fast-deep-equal"),o=(n=u)&&n.__esModule?n:{default:n},i=e("./utils"),f=e("./queue"),a=e("./constants"),c=e("./interfaces"),s=e("./index")},{"./constants":1,"./index":4,"./interfaces":5,"./queue":6,"./utils":15,"fast-deep-equal":16}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=r.isPromise=function(e){return e&&"function"==typeof e.then},u=(r.isObjectLiteral=function(e){return!!e&&e.constructor==={}.constructor},r.getFuncName=function(e){if(e.name)return e.name;var t=/^function\s+([\w\$]+)\s*\(/.exec(e.toString());return t?t[1]:"unknown"},r.compose=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var r=!1,u=function(){},o=[].concat(t);return function t(){if(0!==o.length){var i=o.shift()(e);n(i)?(r=!0,i.then(function(r){e=r,t()})):(e=i,t())}else u(e)}(),r?new Promise(function(e){return u=e}):e}},r.serial=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var r=!1,u=function(){},o=[],i=[].concat(t);return function t(){if(0!==i.length){var f=i.shift()(e);n(f)?(r=!0,f.then(function(e){o.push(e),t()})):(o.push(f),t())}else u(o)}(),r?new Promise(function(e){return u=e}):o}},r.parallel=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var r=!1,u=[],o=[].concat(t);return function t(){if(0!==o.length){var i=o.shift()(e);n(i)&&(r=!0),u.push(i),t()}}(),r?Promise.all(u.map(function(e){return n(e)?e:Promise.resolve(e)})):u}},0);r.getId=function(e){return e+"_"+ ++u}},{}],16:[function(e,t,r){"use strict";var n=Array.isArray,u=Object.keys,o=Object.prototype.hasOwnProperty;t.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var i,f,a,c=n(t),s=n(r);if(c&&s){if((f=t.length)!=r.length)return!1;for(i=f;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(c!=s)return!1;var d=t instanceof Date,l=r instanceof Date;if(d!=l)return!1;if(d&&l)return t.getTime()==r.getTime();var y=t instanceof RegExp,p=r instanceof RegExp;if(y!=p)return!1;if(y&&p)return t.toString()==r.toString();var v=u(t);if((f=v.length)!==u(r).length)return!1;for(i=f;0!=i--;)if(!o.call(r,v[i]))return!1;for(i=f;0!=i--;)if(!e(t[a=v[i]],r[a]))return!1;return!0}return t!=t&&r!=r}},{}]},{},[4])(4)});