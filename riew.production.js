!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Riew=e()}}(function(){return function e(t,r,n){function u(o,a){if(!r[o]){if(!t[o]){var f="function"==typeof require&&require;if(!a&&f)return f(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var s=r[o]={exports:{}};t[o][0].call(s.exports,function(e){return u(t[o][1][e]||e)},s,s.exports,e,t,r,n)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)u(n[o]);return u}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.STATE_CREATED="STATE_CREATED",r.STATE_DESTROY="STATE_DESTROY",r.EFFECT_CREATED="EFFECT_CREATED",r.EFFECT_REMOVED="EFFECT_REMOVED",r.EFFECT_QUEUE_START="EFFECT_QUEUE_START",r.EFFECT_QUEUE_STEP_IN="EFFECT_QUEUE_STEP_IN",r.EFFECT_QUEUE_STEP_OUT="EFFECT_QUEUE_STEP_OUT",r.EFFECT_QUEUE_END="EFFECT_QUEUE_END",r.EFFECT_EXPORTED="EFFECT_EXPORTED",r.EFFECT_FORK="EFFECT_FORK",r.RIEW_CREATED="RIEW_CREATED",r.RIEW_RENDER="RIEW_RENDER",r.RIEW_UNMOUNT="RIEW_UNMOUNT"},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.implementIterable=void 0,r.isEffect=function(e){return e&&e.id&&e.state&&e.items},r.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2],o=function t(){for(var r=arguments.length,n=Array(r),u=0;u<r;u++)n[u]=arguments[u];return e.runQueue(t.items,n)};return o.id=(0,n.getId)("e"),o.state=e,o.items=t,i(o),Object.keys(e.queueAPI).forEach(function(e){o[e]=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return r(u.EFFECT_FORK,o,{type:e,func:n})}}),o.define=function(t,n){return e.queueAPI.define(t,n),o[t]=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return r(u.EFFECT_FORK,o,{type:t,func:n})},o},o.isMutating=function(){return!!o.items.find(function(e){return"mutate"===e.type})},o.subscribe=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(o.isMutating())throw new Error("You should not subscribe a effect that mutates the state. This will lead to endless recursion.");return t&&o(),e.addListener(o),o},o.unsubscribe=function(){return e.removeListener(o),o},o.destroy=function(){return r(u.STATE_DESTROY),o},o.export=function(e){return r(u.EFFECT_EXPORTED,o,e),o},o.test=function(e){var t=r(u.EFFECT_FORK,o),n={setValue:function(e){t.items=[{type:"map",func:[function(){return e}]}].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t.items))},swap:function(e,r,n){Array.isArray(r)||(r=[r]),t.items[e].func=r,n&&(t.items[e].type=n)},swapFirst:function(e,t){n.swap(0,e,t)},swapLast:function(e,r){n.swap(t.items.length-1,e,r)}};return e(n),t},o};var n=e("./utils"),u=e("./constants");var i=r.implementIterable=function(e){"undefined"!=typeof Symbol&&void 0!==Symbol.iterator&&(e[Symbol.iterator]=function(){var t=[e,e.mutate(),e.state.cancel],r=0;return{next:function(){return{value:t[r++],done:r>t.length}}}})}},{"./constants":1,"./utils":16}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,u,i=(u=[],(n={}).get=function(e){var t=u.find(function(t){return t.is(e)});if(t)return t.data;throw new Error('A node with identifier "'+e+'" is missing in the grid.')},n.add=function(e,t){if(!e||!e.id)throw new Error('Each node in the grid must be an object with "id" field. Instead "'+e+'" given.');return u.push(function(e,t){return{id:e.id,parent:t,data:e,is:function(e){return this.id===e},hasParent:function(e){return this.parent===e}}}(e,t)),n},n.remove=function(e){var t=function e(t){var r=u.filter(function(e){return e.hasParent(t)});return[t].concat(r.reduce(function(t,r){return t.concat(e(r.id))},[]))}(e),r=[];return u=u.filter(function(e){return-1===t.indexOf(e.id)||(r.push(e.data),!1)}),r},n.reset=function(){return u=[]},n.nodes=function(){return u},n);r.gridAdd=function(e,t){return i.add(e,t)},r.gridRemove=function(e){return i.remove(e.id)},r.gridReset=function(){return i.reset()},r.gridGetNode=function(e){return i.get(e)},r.gridGetNodes=function(){return i.nodes()}},{}],4:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,u=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){u=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(u)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=v(e("fast-deep-equal")),a=e("./state"),f=e("./effect"),c=v(f),s=v(e("./riew")),l=v(e("./react")),d=e("./grid"),y=v(e("./logger")),p=e("./utils"),E=e("./constants");function v(e){return e&&e.__esModule?e:{default:e}}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g,m,_=function(e){e.defineProduct("state",function(t,r){var n,u=(0,p.createEventBus)((h(n={},E.STATE_DESTROY,function(){var t=(0,d.gridRemove)(i);i.destroy(),t.filter(f.isEffect).forEach(function(t){"__exportedAs"in t&&e.undefineProduct(t.__exportedAs),u(E.EFFECT_REMOVED,t)})}),h(n,E.EFFECT_EXPORTED,function(t,r){t.__exportedAs=r,e.defineProduct(r,function(){return t}),y.default.log(E.EFFECT_EXPORTED,t,r)}),h(n,E.EFFECT_FORK,function(e,t){var r=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e.items));t&&r.push(t);var n=(0,c.default)(i,r,u);return(0,d.gridAdd)(n,e.id),u(E.EFFECT_CREATED,n),n}),n)),i=(0,a.State)(t,r,u),o=(0,c.default)(i,[],u);return(0,d.gridAdd)(i),u(E.STATE_CREATED,i),(0,d.gridAdd)(o,i.id),u(E.EFFECT_CREATED,o),o}),e.defineProduct("mergeStates",function(t){var r=e.produce("state");return r.state.get=function(){return Object.keys(t).reduce(function(e,r){var n=i(t[r],1)[0];return e[r]=n(),e},{})},r.state.set=function(e){if("object"!==(void 0===e?"undefined":u(e)))throw new Error("Wrong merged state value. Must be key-value pairs.");Object.keys(e).forEach(function(r){if(!t[r])throw new Error('There is no state with key "'+r+'".');var n=i(t[r],2),u=n[0],a=n[1];(0,o.default)(e[r],u())||a(e[r])},{})},Object.keys(t).forEach(function(e){t[e].pipe(r.state.triggerListeners).subscribe()}),r}),e.defineProduct("riew",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return(0,s.default)((0,p.createEventBus)({})).apply(void 0,[e].concat(r))}),e.defineProduct("reactRiew",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return l.default.apply(void 0,[e].concat(r))})},b=(m={},(g={}).defineProduct=function(e,t){if(m[e])throw new Error('A product with type "'+e+'" already exists.');m[e]=t},g.undefineProduct=function(e){if(!m[e])throw new Error('There is no product with type "'+e+'" to be removed.');delete m[e]},g.produce=function(e){for(var t,r=arguments.length,n=Array(r>1?r-1:0),u=1;u<r;u++)n[u-1]=arguments[u];if(!m[e])throw new Error('There is no product with type "'+e+'".');var i=(t=m)[e].apply(t,n);return i},g.reset=function(){m={},(0,d.gridReset)(),_(g),y.default.clear()},g.grid=function(){return(0,d.gridGetNodes)()},g);_(b),r.default=b},{"./constants":1,"./effect":2,"./grid":3,"./logger":6,"./react":13,"./riew":14,"./state":15,"./utils":16,"fast-deep-equal":17}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.logger=r.harvester=r.parallel=r.serial=r.compose=r.register=r.use=r.react=r.riew=r.merge=r.state=void 0;var n=e("./utils");Object.defineProperty(r,"compose",{enumerable:!0,get:function(){return n.compose}}),Object.defineProperty(r,"serial",{enumerable:!0,get:function(){return n.serial}}),Object.defineProperty(r,"parallel",{enumerable:!0,get:function(){return n.parallel}});var u=o(e("./harvester")),i=o(e("./logger"));function o(e){return e&&e.__esModule?e:{default:e}}r.state=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u.default.produce("state",e,t)},r.merge=function(e){return u.default.produce("mergeStates",e)},r.riew=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return u.default.produce.apply(u.default,["riew"].concat(t))},r.react={riew:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return u.default.produce.apply(u.default,["reactRiew"].concat(t))}},r.use=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return u.default.produce.apply(u.default,[e].concat(r))},r.register=function(e,t){return u.default.defineProduct(e,function(){return t})},r.harvester=u.default,r.logger=i.default},{"./harvester":4,"./logger":6,"./utils":16}],6:[function(e,t,r){t.exports=e("/Users/krasimir/Work/Krasimir/riew/src/__swap__/logger.js")},{"/Users/krasimir/Work/Krasimir/riew/src/__swap__/logger.js":18}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.createQueueAPI=function(){return n({},d)},r.createQueue=function(e,t){var r=e.set,n=e.get,o=e.queueAPI,a={id:(0,u.getId)("q"),index:null,setStateValue:r,getStateValue:n,result:n(),items:[],add:function(e,t){this.items.push({type:e,func:t,name:t.map(u.getFuncName)})},process:function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];function u(){return a.index<a.items.length?f():(a.index=null,t(i.EFFECT_QUEUE_END,a),a.result)}function f(){t(i.EFFECT_QUEUE_STEP_IN,a);var e=a.items[a.index],n=e.type,f=e.func,c=o[n];if(c)return c(a,f,r,function(e){return a.result=e,t(i.EFFECT_QUEUE_STEP_OUT,a),a.index++,u()});throw new Error('Unsupported method "'+n+'".')}return a.index=0,t(i.EFFECT_QUEUE_START,a),a.items.length>0?f():(t(i.EFFECT_QUEUE_END,a),a.result)},cancel:function(){a.items=[]}};return a};var u=e("./utils"),i=e("./constants"),o=l(e("./queueMethods/pipe")),a=l(e("./queueMethods/map")),f=l(e("./queueMethods/mapToKey")),c=l(e("./queueMethods/mutate")),s=l(e("./queueMethods/filter"));function l(e){return e&&e.__esModule?e:{default:e}}var d={define:function(e,t){this[e]=function(e,r,n,i){var o=t.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r))(e.result,n,e);return(0,u.isPromise)(o)?o.then(i):i(o)}}};d.define("pipe",o.default),d.define("map",a.default),d.define("mapToKey",f.default),d.define("mutate",c.default),d.define("filter",s.default)},{"./constants":1,"./queueMethods/filter":8,"./queueMethods/map":9,"./queueMethods/mapToKey":10,"./queueMethods/mutate":11,"./queueMethods/pipe":12,"./utils":16}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,u){var i=e.apply(void 0,[t].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r)));return(0,n.isPromise)(i)?i.then(function(e){return e||(u.index=u.items.length),t}):(i||(u.index=u.items.length),t)}};var n=e("../utils")},{"../utils":16}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r){return(e||function(e){return e}).apply(void 0,[t].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r)))}}},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r){return function(t){return function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}({},e,t)}.apply(void 0,[t].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r)))}}},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,u){var i=(e||function(e,t){return t}).apply(void 0,[t].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r)));return(0,n.isPromise)(i)?i.then(function(e){return u.setStateValue(e),e}):(u.setStateValue(i),i)}};var n=e("../utils")},{"../utils":16}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r){var u=(e||function(){}).apply(void 0,[t].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r)));return(0,n.isPromise)(u)?u.then(function(){return t}):t}};var n=e("../utils")},{"../utils":16}],13:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,u=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){u=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(u)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};r.default=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),u=1;u<t;u++)r[u-1]=arguments[u];return function t(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=function(t){var a=(0,i.useState)(null),s=n(a,2),l=s[0],d=s[1],y=(0,i.useState)(null),p=n(y,2),E=p[0],v=p[1];return(0,i.useEffect)(function(){l&&l.update(t)},[t]),(0,i.useEffect)(function(){var n;(l=f.riew.apply(void 0,[function(t){v(null===t?null:o.default.createElement(e,t))}].concat(r)),u&&u.length>0)&&(l=(n=l).with.apply(n,c(u)));return d(l),l.mount(t),function(){l.unmount()}},[]),E};return s.displayName="Riew("+(0,a.getFuncName)(e)+")",s.with=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return t(r)},s}()};var u,i="undefined"!=typeof window?window.React:void 0!==t?t.React:null,o=(u=i)&&u.__esModule?u:{default:u},a=e("../utils"),f=e("../index");function c(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../index":5,"../utils":16}],14:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(r,"__esModule",{value:!0});var u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,u=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){u=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(u)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},a=e("./index"),f=e("./effect"),c=e("./utils"),s=e("./constants");function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null===e||void 0!==e&&"object"!==(void 0===e?"undefined":o(e)))throw new Error(t+' must be called with a key-value object. Instead "'+e+'" passed.');return e}function y(e){return e.reduce(function(e,t){return e=i({},e,"string"==typeof t?l({},"@"+t,!0):t)},{})}var p=function(e,t){return i({},e,t)};r.default=function(e){return function t(r){for(var n=arguments.length,o=Array(n>1?n-1:0),E=1;E<n;E++)o[E-1]=arguments[E];var v={id:(0,c.getId)("r"),name:(0,c.getFuncName)(r)},h=!1,g=[],m=[],_=[],b={},A=(0,a.state)({},!1),T=u(A,1),w=T[0],F=(0,a.state)({},!1),O=u(F,1),S=O[0],P=(0,a.state)({},!1),R=u(P,1),j=R[0],C=function(){return h},U=function(e){return!!m.find(function(t){return t.state.id===e.id})},M=S.mutate(function(e,t){var r=i({},e);return t&&Object.keys(t).forEach(function(e){if((0,f.isEffect)(t[e])&&!t[e].isMutating()){var n=t[e];r[e]=n(),U(n.state)||m.push(n.pipe(function(){return x(l({},e,n()))}).subscribe())}else r[e]=t[e]}),r}),x=M.filter(C).pipe(function(t){r(t),e(s.RIEW_RENDER,v,t)}),D=j.mutate(p),I=w.mutate(p);function N(){Object.keys(b).forEach(function(e){var t=void 0;"@"===e.charAt(0)?(e=e.substr(1,e.length),t=(0,a.use)(e)):t=b[e],M(l({},e,t)),D(l({},e,t))})}return D({state:function(){var e=a.state.apply(void 0,arguments);return g.push(e),e},render:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return d(e,"The `render` method"),x(e)}),isActive:C,props:w}),v.isActive=C,v.mount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(e,"The `mount` method"),I(e),M(e),N();var t=c.parallel.apply(void 0,o)(j()),r=function(e){return _=e||[]};return(0,c.isPromise)(t)?t.then(r):r(t),h=!0,x(),v},v.update=function(e){x(e),I(e)},v.unmount=function(){return h=!1,S.destroy(),j.destroy(),g.forEach(function(e){return e.destroy()}),g=[],_.filter(function(e){return"function"==typeof e}).forEach(function(e){return e()}),_=[],m.forEach(function(e){return e.unsubscribe()}),m=[],e(s.RIEW_UNMOUNT,v,S()),v},v.__setExternals=function(e){b=i({},b,y(e))},v.with=function(){for(var e=arguments.length,n=Array(e),u=0;u<e;u++)n[u]=arguments[u];var i=t.apply(void 0,[r].concat(o));return i.__setExternals(n),i},v.test=function(e){var n=t.apply(void 0,[r].concat(o));return n.__setExternals([e]),n},e(s.RIEW_CREATED,v,S()),v}}},{"./constants":1,"./effect":2,"./index":5,"./utils":16}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.State=function(e,t,r){var n={},u=e,c=[],s=[],l=!0;return n.loggable=t,n.id=(0,o.getId)("s"),n.queueAPI=(0,a.createQueueAPI)(),n.triggerListeners=function(){return c.forEach(function(e){return e()})},n.get=function(){return u},n.set=function(e){(0,i.default)(u,e)||(u=e,n.triggerListeners())},n.destroy=function(){l=!1,n.cancel(),c=[]},n.listeners=function(){return c},n.addListener=function(e){return c.push(e)},n.removeListener=function(e){return c=c.filter(function(t){return t.id!==e.id})},n.runQueue=function(e,t){if(!l)return u;var i=(0,a.createQueue)(n,r.extend(function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}({},f.EFFECT_QUEUE_END,function(){s=s.filter(function(e){return e.id!==i.id})})));return e.forEach(function(e){var t=e.type,r=e.func;return i.add(t,r)}),s.push(i),i.process.apply(i,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t))},n.cancel=function(){s.forEach(function(e){return e.cancel()}),s=[]},n.queues=function(){return s},n};var n,u=e("fast-deep-equal"),i=(n=u)&&n.__esModule?n:{default:n},o=e("./utils"),a=e("./queue"),f=e("./constants")},{"./constants":1,"./queue":7,"./utils":16,"fast-deep-equal":17}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=r.isPromise=function(e){return e&&"function"==typeof e.then},u=(r.isObjectLiteral=function(e){return!!e&&e.constructor==={}.constructor},r.getFuncName=function(e){if(e.name)return e.name;var t=/^function\s+([\w\$]+)\s*\(/.exec(e.toString());return t?t[1]:"unknown"},r.compose=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var r=!1,u=function(){},i=[].concat(t);return function t(){if(0!==i.length){var o=i.shift()(e);n(o)?(r=!0,o.then(function(r){e=r,t()})):(e=o,t())}else u(e)}(),r?new Promise(function(e){return u=e}):e}},r.serial=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var r=!1,u=function(){},i=[],o=[].concat(t);return function t(){if(0!==o.length){var a=o.shift()(e);n(a)?(r=!0,a.then(function(e){i.push(e),t()})):(i.push(a),t())}else u(i)}(),r?new Promise(function(e){return u=e}):i}},r.parallel=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var r=!1,u=[],i=[].concat(t);return function t(){if(0!==i.length){var o=i.shift()(e);n(o)&&(r=!0),u.push(o),t()}}(),r?Promise.all(u.map(function(e){return n(e)?e:Promise.resolve(e)})):u}},0);r.getId=function(e){return e+"_"+ ++u},r.createEventBus=function e(t){var r=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),u=1;u<r;u++)n[u-1]=arguments[u];if(t[e])return t[e].apply(t,n)};return r.extend=function(t){var n=e(t);return function(e){for(var t=arguments.length,u=Array(t>1?t-1:0),i=1;i<t;i++)u[i-1]=arguments[i];n.apply(void 0,[e].concat(u)),r.apply(void 0,[e].concat(u))}},r}},{}],17:[function(e,t,r){"use strict";var n=Array.isArray,u=Object.keys,i=Object.prototype.hasOwnProperty;t.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var o,a,f,c=n(t),s=n(r);if(c&&s){if((a=t.length)!=r.length)return!1;for(o=a;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(c!=s)return!1;var l=t instanceof Date,d=r instanceof Date;if(l!=d)return!1;if(l&&d)return t.getTime()==r.getTime();var y=t instanceof RegExp,p=r instanceof RegExp;if(y!=p)return!1;if(y&&p)return t.toString()==r.toString();var E=u(t);if((a=E.length)!==u(r).length)return!1;for(o=a;0!=o--;)if(!i.call(r,E[o]))return!1;for(o=a;0!=o--;)if(!e(t[f=E[o]],r[f]))return!1;return!0}return t!=t&&r!=r}},{}],18:[function(e,t,r){arguments[4][6][0].apply(r,arguments)},{"/Users/krasimir/Work/Krasimir/riew/src/__swap__/logger.js":18,dup:6}]},{},[5])(5)});