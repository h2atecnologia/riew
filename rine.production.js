!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).rine=n()}}(function(){return function u(i,f,c){function l(e,n){if(!f[e]){if(!i[e]){var t="function"==typeof require&&require;if(!n&&t)return t(e,!0);if(a)return a(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var r=f[e]={exports:{}};i[e][0].call(r.exports,function(n){return l(i[e][1][n]||n)},r,r.exports,u,i,f,c)}return f[e].exports}for(var a="function"==typeof require&&require,n=0;n<c.length;n++)l(c[n]);return l}({1:[function(r,n,u){(function(n){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(n,e){var t=e.broadcast,o=!1,i=[],r=void 0,u=void 0,f=y();function c(r,e){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],u=[];i=i.filter(function(n){var e=n.type,t=n.done,o=n.once;return e!==r||(u.push(t),!o)}),u.forEach(function(n){return n(e)}),n&&t(r,e,f)}function l(e,n){if(!n)return new Promise(function(n){i.push({type:e,done:function(){o&&n.apply(void 0,arguments)},once:!0})});i.push({type:e,done:n,once:!0})}function a(n,e){i.push({type:n,done:e,once:!1})}function d(){return o}return{id:f,name:(0,p.getFuncName)(n),in:function(e,t){return o=!0,u=function(n){o&&e(s.default.createElement(r,n))},n({render:function(n){r="function"==typeof n?n:function(){return n},u(t)},take:l,takeEvery:a,put:c,isMounted:d})},update:function(n){u(n)},out:function(){o=!1,i=[]},put:c,system:function(){return{mounted:o,pending:i}}}};var e,t="undefined"!=typeof window?window.React:void 0!==n?n.React:null,s=(e=t)&&e.__esModule?e:{default:e},p=r("./utils");var o=0,y=function(){return"r"+ ++o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils":3}],2:[function(o,n,r){(function(n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.System=void 0;var c=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},a=function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(n,e){var t=[],o=!0,r=!1,u=void 0;try{for(var i,f=n[Symbol.iterator]();!(o=(i=f.next()).done)&&(t.push(i.value),!e||t.length!==e);o=!0);}catch(n){r=!0,u=n}finally{try{!o&&f.return&&f.return()}finally{if(r)throw u}}return t}(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};r.routine=function(l){function n(n){var e=(0,d.useState)(null),t=a(e,2),o=t[0],r=t[1],u=(0,d.useState)(null),i=a(u,2),f=i[0],c=i[1];return(0,d.useEffect)(function(){f&&f.update(n)},[n]),(0,d.useEffect)(function(){return c(f=(0,s.default)(l,{broadcast:function(){p.put.apply(p,arguments)}})),p.addController(f),f.in(r,n),function(){f.out(),p.removeController(f)}},[]),o}return n.displayName="Routine("+(0,e.getFuncName)(l)+")",n},r.partial=function(f){return function(u){function i(n){var e=(0,d.useState)(u),t=a(e,2),o=t[0],r=t[1];return(0,d.useEffect)(function(){return i.set=function(n){o=Object.assign({},o,n),r(o)},i.get=function(){return o},function(){i.set=function(n){u=n},i.get=function(){return u}}},[]),l.default.createElement(f,c({},o,n))}return i.set=function(n){u=n},i.get=function(){return u},i.displayName="Partial("+(0,e.getFuncName)(f)+")",i}};var d="undefined"!=typeof window?window.React:void 0!==n?n.React:null,l=t(d),s=t(o("./RoutineController")),e=o("./utils");function t(n){return n&&n.__esModule?n:{default:n}}var p=r.System={controllers:{},addController:function(n){this.controllers[n.id]=n},removeController:function(n){delete this.controllers[n.id]},put:function(e,t,o){var r=this;Object.keys(this.controllers).forEach(function(n){n!==o&&r.controllers[n].put(e,t,!1)})},debug:function(){var t=this,n=Object.keys(this.controllers).reduce(function(n,e){return n=n.concat(t.controllers[e].system().pending)},[]);return{controllers:this.controllers,pending:n}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./RoutineController":1,"./utils":3}],3:[function(n,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.isGenerator=function(n){return n&&"function"==typeof n.next},t.isPromise=function(n){return n&&"function"==typeof n.then},t.getFuncName=function(n){if(n.name)return n.name;var e=/^function\s+([\w\$]+)\s*\(/.exec(n.toString());return e?e[1]:"unknown"}},{}]},{},[2])(2)});